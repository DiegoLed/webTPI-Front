{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USUARIO\\\\source\\\\repos\\\\TPI-frontend\\\\src\\\\pages\\\\login\\\\Login.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport axios from 'axios';\nimport { Button, TextField, Link, Grid, Box, Typography, Container } from '@mui/material';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst apiURL = 'https://localhost:44311';\nconst {\n  search\n} = window.location;\nconst params = new URLSearchParams(search);\nconst redirect = params.get('callbackURL');\n\nconst Login = () => {\n  _s();\n\n  const [user, setUser] = React.useState(null);\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const history = useHistory();\n  React.useEffect(() => {\n    setUser(null);\n    localStorage.setItem('auth', JSON.stringify(null));\n  }, []);\n\n  const handleEmail = event => {\n    setEmail(event.target.value);\n  };\n\n  const handlePassword = event => {\n    setPassword(event.target.value);\n  };\n\n  const submitSession = () => {\n    const obj = {\n      emailUnlam: email,\n      password: password\n    };\n    console.log(obj);\n    axios.post(apiURL + '/api/usuario/authenticate', obj).then(response => {\n      console.log(response.data);\n\n      if (response.data) {\n        setUser(response.data.idTipo);\n\n        if (response.data.token) {\n          window.localStorage.setItem('auth', JSON.stringify(response.data));\n          window.location.href = redirect || '/home'; // history.push(\"/home\");\n        }\n      }\n\n      console.log('login', localStorage.getItem('auth'));\n    }).catch(error => {\n      if (error) {\n        return null;\n      }\n\n      throw error.response;\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xl\",\n    style: {\n      background: `url('${process.env.PUBLIC_URL}/backImage2.png') no-repeat center`\n    },\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        marginTop: 8,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        textAlign: 'center'\n      },\n      style: {\n        backdropFilter: 'blur(2px)',\n        height: '100vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        component: \"h3\",\n        variant: \"h3\",\n        style: {\n          marginBottom: '1em',\n          fontWeight: '500'\n        },\n        children: \"Bienvenido a WEB TPI\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        component: \"h4\",\n        variant: \"h4\",\n        style: {\n          marginBottom: '1em',\n          fontWeight: '300',\n          width: '20em'\n        },\n        children: \"Por favor ingrese su email y contrase\\xF1a para loguearse a la plataforma\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        component: \"form\",\n        sx: {\n          mt: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          id: \"email\",\n          label: \"Email facultativo\",\n          name: \"email\",\n          autoComplete: \"email\",\n          autoFocus: true,\n          onChange: handleEmail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          name: \"password\",\n          label: \"Password\",\n          type: \"password\",\n          id: \"password\",\n          autoComplete: \"current-password\",\n          onChange: handlePassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"error\",\n          sx: {\n            mt: 3,\n            mb: 2\n          },\n          onClick: submitSession,\n          children: \"Ingresar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"q66Ul/WrgrlwAi0HEso9YpgfG+A=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/USUARIO/source/repos/TPI-frontend/src/pages/login/Login.js"],"names":["React","axios","Button","TextField","Link","Grid","Box","Typography","Container","useHistory","apiURL","search","window","location","params","URLSearchParams","redirect","get","Login","user","setUser","useState","email","setEmail","password","setPassword","history","useEffect","localStorage","setItem","JSON","stringify","handleEmail","event","target","value","handlePassword","submitSession","obj","emailUnlam","console","log","post","then","response","data","idTipo","token","href","getItem","catch","error","background","process","env","PUBLIC_URL","marginTop","display","flexDirection","alignItems","textAlign","backdropFilter","height","marginBottom","fontWeight","width","mt","mb"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport React from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Link,\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  Container\r\n} from '@mui/material';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst apiURL = 'https://localhost:44311';\r\nconst { search } = window.location;\r\nconst params = new URLSearchParams(search);\r\nconst redirect = params.get('callbackURL'); \r\n\r\nconst Login = () => {\r\n  const [user, setUser] = React.useState(null);\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const history = useHistory();\r\n\r\n  React.useEffect(() => {\r\n    setUser(null);\r\n    localStorage.setItem('auth', JSON.stringify(null));\r\n  }, [])\r\n\r\n  \r\n  const handleEmail = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const handlePassword = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const submitSession = () => {\r\n    const obj = {\r\n      emailUnlam: email,\r\n      password: password,\r\n    }\r\n    console.log(obj);\r\n    axios.post(apiURL + '/api/usuario/authenticate', obj)\r\n      .then(response => {\r\n        console.log(response.data);\r\n        if (response.data) {\r\n          setUser(response.data.idTipo);\r\n          if (response.data.token) {\r\n            window.localStorage.setItem('auth', JSON.stringify(response.data));\r\n            window.location.href = redirect || '/home';\r\n            // history.push(\"/home\");\r\n          }\r\n        }\r\n        \r\n\r\n      console.log('login', localStorage.getItem('auth'));\r\n      })\r\n      .catch((error) => {\r\n        if (error) {\r\n          return null;\r\n        }\r\n  \r\n        throw error.response;\r\n      });\r\n  };\r\n\r\n  return(\r\n    <Container component=\"main\" maxWidth=\"xl\"  style={{ background: `url('${process.env.PUBLIC_URL}/backImage2.png') no-repeat center`}}>\r\n      <Box\r\n        sx={{\r\n          marginTop: 8,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          textAlign: 'center',\r\n        }}\r\n        style={{backdropFilter: 'blur(2px)', height: '100vh' }}\r\n      >\r\n        <Typography component=\"h3\" variant=\"h3\" style={{ marginBottom: '1em', fontWeight: '500'}}>\r\n          Bienvenido a WEB TPI\r\n        </Typography>\r\n        <Typography component=\"h4\" variant=\"h4\" style={{ marginBottom: '1em', fontWeight: '300', width: '20em'}}>\r\n        Por favor ingrese su email y contraseña para loguearse a la plataforma\r\n        </Typography>\r\n        <Box component=\"form\" sx={{ mt: 1 }}>\r\n            <TextField\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"email\"\r\n              label=\"Email facultativo\"\r\n              name=\"email\"\r\n              autoComplete=\"email\"\r\n              autoFocus\r\n              onChange={handleEmail}\r\n            />\r\n            <TextField\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n              onChange={handlePassword}\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"error\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n              onClick={submitSession}\r\n            >\r\n              Ingresar\r\n            </Button>\r\n          {/*} <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"#\" variant=\"body2\" color=\"error\">\r\n                ¿Olvidaste la contraseña?\r\n              </Link>\r\n            </Grid>\r\n      </Grid> */}\r\n        </Box>\r\n      </Box>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}